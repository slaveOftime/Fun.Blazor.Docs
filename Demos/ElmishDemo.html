<pre><code class="language-fsharp">open System.Threading.Tasks
open MudBlazor
open Fun.Blazor
open Elmish


type private Model = { Count: int }

type private Msg =
    | Increase
    | Decrease
    | IncreaseTask


let private delayDecrease =
    Cmd.OfAsync.result (
        async {
            do! Async.Sleep 3000
            return Decrease
        }
    )


let private init () = { Count = 0 }, delayDecrease

let private update msg model =
    match msg with
    | Increase -&gt; { model with Count = model.Count + 1 }, Cmd.none
    | Decrease -&gt; { model with Count = model.Count - 1 }, delayDecrease
    | IncreaseTask -&gt;
        model,
        Cmd.OfTask.result (
            task {
                do! Task.Delay 1000
                return Increase
            }
        )

let private view model (dispatch: Msg -&gt; unit) =
    div.create [
        MudText'() {
            Typo Typo.h6
            Color Color.Primary
            model.Count
        }
        MudButtonGroup'() {
            Variant Variant.Outlined
            childContent [
                MudButton'() {
                    Color Color.Primary
                    OnClick(fun _ -&gt; Increase |&gt; dispatch)
                    &quot;Increase&quot;
                }
                MudButton'() {
                    Color Color.Primary
                    OnClick(fun _ -&gt; IncreaseTask |&gt; dispatch)
                    &quot;Increase task (delayed in 1s)&quot;
                }
                MudButton'() {
                    Color Color.Secondary
                    Variant Variant.Outlined
                    OnClick(fun _ -&gt;
                        task {
                            do! System.Threading.Tasks.Task.Delay 1000
                            Increase |&gt; dispatch
                        }
                    )
                    &quot;Increase (Delay 1s in click event)&quot;
                }
                MudButton'() {
                    Color Color.Secondary
                    Variant Variant.Outlined
                    OnClick(fun _ -&gt; Decrease |&gt; dispatch)
                    &quot;Decrease (loop in 3s)&quot;
                }
            ]
        }
    ]


let entry = html.elmish (init, update, view)
</code></pre>
