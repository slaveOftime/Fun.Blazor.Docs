<h1>Hot Reload</h1>
<pre><code>dotnet tool install --global Fun.Blazor.Cli --version 2.0.0
</code></pre>
<p>You can install template to create project with setted up hot-reload</p>
<pre><code>dotnet new --install Fun.Blazor.Templates::2.0.0
</code></pre>
<p><img src="Docs/assets/site-hot-reload.gif" alt="image" /></p>
<p>The basic steps:</p>
<ol>
<li><p>Define entry point</p>
<p>You can pick a component as an entry point and replace it with below code at its usage place.</p>
<p>When you have multiple projects, to get better performance. You can have multiple entry for every project. You can use the last parameter to target to different cli watch host.</p>
<pre><code>#if DEBUG       
    html.hotReloadComp (yourComponent, &quot;FullNameName.yourComponent&quot;, &quot;http://localhost:9025&quot;)
#else
    yourComponent
#endif
</code></pre>
</li>
<li><p>Build your project and run it</p>
</li>
<li><p>Open a terminal and run:</p>
<pre><code>fun-blazor watch &quot;your full path of the project which contains the entry file&quot; --server &quot;http://localhost:9025&quot;
</code></pre>
<p>By default the server is running at 9025, but when you have multiple project, you may want to use different port, and the port should be the same as what you customized at the entry file.</p>
</li>
<li><p>Edit and save</p>
<p>Navigate to the page which contains <strong>yourComponent</strong> first on the browser. At this time, it will connect to the cli host and start receive changes.</p>
<p>Go to the file which define <strong>yourComponent</strong>, add <strong>// hot-reload</strong> at its top, change whatever you want and save. Your UI should be updated accordingly.</p>
</li>
</ol>
<h2>Limitations</h2>
<ul>
<li><p>Entry file and <strong>yourComponent</strong> should be defined in different files</p>
</li>
<li><p>Not all fsharp expression can be parsed correctly. So it is better to separate your UI logic and UI layout in different file, and only add <strong>// hot-reload</strong> to the UI layout file.</p>
<p>For example, if you want to add extension method to the IComponentHook to access backend server, you may separate it in a new file.</p>
<p>File structure can be like this:</p>
<pre><code>YourComponent
    Stores.fs
    Hooks.fs
    Control1.fs // hot-reload
    Control2.fs // hot-reload
</code></pre>
</li>
<li><p>The first save will take more time</p>
</li>
<li><p>To get hot-reload for other components which is defined in different files</p>
<p>Those components must be defined in the same project<br />
Those components must be referenced directly by <strong>yourComponent</strong><br />
You also need to add <strong>// hot-reload</strong> to those files which contains the components</p>
</li>
<li><p>You should not enable too much files for hot reload for performance concern</p>
</li>
<li><p>It does not support add new file or rename file etc. Only modify is supported.</p>
</li>
<li><p>Only the state created in IGlobalStore or IShareStore will be kept.</p>
</li>
</ul>
