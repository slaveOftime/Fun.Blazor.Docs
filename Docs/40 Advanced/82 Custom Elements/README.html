<h1 id="custom-elements">Custom Elements</h1>
<p>You will need to install nuget package <strong>Fun.Blazor.CustomElements</strong>.</p>
<p>For some use cases, I only want ASP.NET Core to use Fun.Blazor to pre-render static content without Blazor server connected. But for some pages or components, I want to connect to Blazor server temporarily. So I can still use Blazor and hide backend API with a single WebSocket for interaction.</p>
<p>It is powered by <strong>Microsoft.AspNetCore.Components.CustomElements</strong> which is officially supported in .NET 7.</p>
<h2 id="how-to-use">How to use</h2>
<p>Register the components:</p>
<pre><code class="language-fsharp">services.AddServerSideBlazor(fun options -&gt; options.RootComponents.RegisterCustomElementForFunBlazor(Assembly.GetExecutingAssembly()))
</code></pre>
<p>Set the helper script, for example you can put it at the head of your html page:</p>
<pre><code class="language-fsharp">html {
    head {
        ...
        CustomElement.lazyBlazorJs ()
    }
    body {
        ...
    }
}
</code></pre>
<p>Define your custom component</p>
<pre><code class="language-fsharp">
[&lt;FunBlazorCustomElement&gt;]
type PostLikesSurvey() =
    inherit FunComponent()

    [&lt;Parameter&gt;]
    member val post_id = &quot;&quot; with get, set

    override this.Render() = fragment {
        ...
    }
</code></pre>
<p>Consume it</p>
<pre><code class="language-fsharp">html.customElement&lt;PostLikesSurvey&gt; (
    delayMs = 5_000, 
    attrs = (nameof Unchecked.defaultof&lt;PostLikesSurvey&gt;.post_id =&gt; post.Id.ToString())
)
</code></pre>
<h2 id="demo">Demo</h2>
<p>There are counters below, but shares the same <code>IShareStore</code>. So, in Blazor server mode, when you click one button, the other button will also increase automatically, which means they share the same WebSocket connection.</p>
