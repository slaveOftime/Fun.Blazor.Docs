<h1 id="dependency-injection-di">Dependency injection (DI)</h1>
<p><strong>html.inject/html.comp</strong> maybe the <span style="background:orangered">hardest api</span> in Fun.Blazor because its render behavior. (Even we do not have many apis, just a bunch of dsl for building dom). By default, every time you call it you will get a fresh new component. So if you want to keep some state which should not be erased by its caller, you should specify a key as its first parameter.</p>
<p>Another hard thing is its internal rendering. It requires a function as its parameter, this function is <strong>'Services -&gt; NodeRenderFragment</strong>. 'Services is a tuple of service types you want to inject. NodeRenderFragment is a delegate which compose the dom tree (which can be treat as another function). By default, the dom tree will not change unless you manually trigger it by <strong>hook.StateHasChanged()</strong>, or do things like below:</p>
